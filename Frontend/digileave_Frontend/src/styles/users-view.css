/* ========= GRID ========= */
/* desktop unchanged: two even columns with consistent gap */
.user-grid { display:grid; grid-template-columns:1fr; gap:20px; }
@media (min-width:768px){ .user-grid{ grid-template-columns:repeat(2,1fr);} }
@media (min-width:1280px){ .user-grid{ grid-template-columns:repeat(2,1fr);} }

/* ========= LIST (COMPACT WRAPPER) ========= */
.user-list{
  border:1px solid var(--color-surface-border);
  border-radius:16px;
  background: var(--color-surface);
  backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  box-shadow: 0 6px 18px var(--color-surface-shadow);
  overflow:hidden;
}

/* ========= CARDS ========= */
.user-card{
  border:1px solid var(--color-surface-border);
  border-radius:16px;
  background: var(--color-surface);
  backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  box-shadow: 0 6px 18px var(--color-surface-shadow);
  padding:18px 18px 14px;
  transition: transform .12s ease, box-shadow .2s ease, border-color .2s ease;
}
.user-card:hover{
  transform: translateY(-2px);
  box-shadow: 0 10px 24px var(--color-surface-shadow);
  border-color: color-mix(in oklab, var(--color-text) 18%, transparent);
}
.user-card-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; min-width:0; }
.user-identity{ display:flex; align-items:center; gap:12px; min-width:0; }

/* initials circles — slightly bigger but letters slightly smaller for balance */
.user-avatar{
  width:50px; height:50px; border-radius:50%; display:grid; place-items:center;
  font-weight:700; font-size:0.95rem;
  background: var(--color-accent); color:#111; user-select:none; flex:0 0 auto;
}
.user-title{ display:grid; gap:4px; min-width:0; }
.user-name{ font-weight:700; font-size:1.15rem; }
.user-email{ display:flex; align-items:center; gap:6px; opacity:.9; min-width:0; }

/* ========= ROLE PILLS ========= */
/* base: one fixed height, centered text, nowrap always */
.role-badge{
  display:inline-flex; align-items:center; justify-content:center;
  height:32px; padding:0 12px; border-radius:999px;
  font-weight:700; font-size:.82rem; line-height:1; white-space:nowrap;
  border:1px solid color-mix(in oklab, var(--color-text) 16%, transparent);
  background: color-mix(in oklab, var(--color-accent) 14%, transparent); /* USER default */
  max-width: 100%;
  text-align:center;
}

/* role tones */
.role-approver{
  background: color-mix(in oklab, var(--color-accent) 24%, transparent);
  border-color: color-mix(in oklab, var(--color-text) 22%, transparent);
}
.role-admin{
  background: color-mix(in oklab, #b36b00 26%, transparent);
  border-color: color-mix(in oklab, #b36b00 40%, transparent);
}

/* ========= META / ACTIONS ========= */
.user-meta{ margin-top:12px; }
.user-meta-row{ display:flex; align-items:center; gap:8px; font-weight:600; }
.user-chip{ display:grid; place-items:center; width:22px; height:22px; border-radius:8px;
  background: color-mix(in oklab, var(--color-text) 10%, transparent); }
.user-dot{ width:4px; height:4px; border-radius:50%; background: currentColor; opacity:.45; display:inline-block; }
.user-actions-row{ margin-top:14px; display:flex; gap:10px; justify-content:flex-end; }

/* ========= COMPACT ROWS (tight info, not cardy) ========= */
.user-compact{
  display:grid;
  grid-template-columns:auto 1fr auto;
  gap:12px;
  padding:12px 14px;
  border-bottom:1px solid var(--color-surface-border);
}
.user-compact:hover{ background: color-mix(in oklab, var(--color-text) 6%, transparent); }
.user-compact:last-child{ border-bottom:none; }

.user-compact-avatar{
  width:46px; height:46px; border-radius:50%; display:grid; place-items:center;
  background:var(--color-accent); color:#111; font-weight:700; font-size:0.95rem;
}
.user-compact-body{ min-width:0; }
.user-compact-top{ display:flex; align-items:center; gap:8px; min-width:0; }
.user-compact-name{ font-weight:700; }
.user-compact-sub{ display:flex; align-items:center; gap:8px; opacity:.9; flex-wrap:wrap; min-width:0; }
.user-compact-email{ max-width:34ch; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.user-compact-actions{ display:flex; gap:10px; align-self:center; }

/* ========= TABLE ========= */
.user-table-wrap{
  border:1px solid var(--color-surface-border); border-radius:16px; overflow:hidden;
  background: var(--color-surface); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  box-shadow: 0 6px 18px var(--color-surface-shadow);
}
.user-scroll{ overflow:auto; }
.user-table{ width:100%; border-collapse:separate; border-spacing:0; }
.user-table thead th, .user-table tbody td{ padding:12px 14px; border-bottom:1px solid var(--color-surface-border); }
.user-table thead th{ font-weight:700; background: color-mix(in oklab, var(--color-accent) 18%, transparent); }
.user-nowrap{ white-space:nowrap; }
.user-ellipsis{ max-width:420px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.user-table-id{ display:flex; align-items:center; gap:10px; }

/* table initials */
.user-table-avatar{
  width:32px; height:32px; border-radius:50%; display:grid; place-items:center;
  background:var(--color-accent); color:#111; font-weight:700; font-size:.9rem;
}

/* center Role column */
.role-col { text-align:center; }

/* space between Edit / Delete in table */
.user-actions-cell{ white-space:nowrap; }
.user-actions-cell .btn + .btn { margin-left:10px; }

/* =========================
   1) CARDS — MOBILE ONLY
   Make role pill taller so it never overlaps
   ========================= */
@media (max-width: 640px){
  .user-card .role-badge{
    height: 36px;
    padding: 0 14px;
    font-size: .75rem;
    margin-top: -10%;
  }
}

/* =========================
   2) TABLE — MOBILE ONLY
   Smaller text + give "Working since" room (no wrap)
   ========================= */
@media (max-width: 640px){
  .user-table{
    font-size: 0.95rem;
  }
  .user-table thead th,
  .user-table tbody td{
    padding: 10px 12px;
  }
  /* Email gets reasonable width, stays ellipsized */
  .user-table th:nth-child(2){ width: 40%; }
  .user-table td:nth-child(2){ max-width: 28ch; }

  /* Working since: no wrap, reserve space */
  .user-table th:nth-child(4),
  .user-table td:nth-child(4){
    white-space: nowrap;
    width: 1%;            /* lets the column size to content */
  }
}

/* =========================
   3) COMPACT — MOBILE ONLY
   Role pill pinned right (top row).
   Email on its own line.
   "Working Since …" + small buttons on the next line.
   ========================= */
@media (max-width: 640px){
  /* 2 rows: top (name + role), row 2 (email + since + actions) */
  .user-list .user-compact{
    display: grid;
    grid-template-columns: auto 1fr auto;  /* avatar | content | right side */
    grid-template-rows: auto auto;         /* top | details */
    column-gap: 10px;
    row-gap: 6px;
    align-items: center;
    padding: 8px 10px;
  }
  .user-list .user-compact-body{ display: contents; }

  /* Row 1 (left): name */
  .user-list .user-compact-top{
    grid-column: 2; grid-row: 1;
    min-width: 0;
  }

  /* Row 1 (right): role pinned right */
  .user-list .role-badge{
    justify-self: end;
    height: 26px;
    padding: 0 10px;
    font-size: .74rem;
    white-space: nowrap;
  }

  /* Row 2 (left block): email then since on a new line */
  .user-list .user-compact-sub{
    grid-column: 2; grid-row: 2;
    display: flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;        /* allow a controlled wrap */
    min-width: 0;
    font-size: .9rem;
  }
  /* trim long emails */
  .user-list .user-compact-email{
    max-width: 22ch;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  /* hide the dot and force "Since ..." to next line */
  .user-list .user-compact-sub .user-dot{ display: none; }
  .user-list .user-compact-sub span:last-child{
    flex-basis: 100%;
    margin-top: 2px;        /* "Working Since …" below the email */
    white-space: nowrap;
  }

  /* Row 2 (right): actions on same line as "Since ..." */
  .user-list .user-compact-actions{
    grid-column: 3; grid-row: 2;
    display: flex;
    align-items: center;
    gap: 6px;
    white-space: nowrap;
  }
  .user-list .user-compact-actions .btn{
    padding: 6px 8px;
    font-size: .8rem;
    line-height: 1;
    border-radius: 8px;
    margin-bottom: -10%;
  }

  /* slightly smaller avatar to free width */
  .user-list .user-compact-avatar{
    width: 34px; height: 34px; font-size: .82rem;
  }
}
